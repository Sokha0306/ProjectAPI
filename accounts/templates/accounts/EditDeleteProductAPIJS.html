<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit/Delete Product</title>
</head>
<body>

  <h2>Update or Delete Product</h2>

  <label>Product ID:</label>
  <input type="number" id="productId"><br><br>

  <label>Product Name:</label>
  <input type="text" id="productName"><br><br>

  <label>Price:</label>
  <input type="text" id="price"><br><br>

  <button onclick="updateProduct()">Update</button>
  <button onclick="deleteProduct()">Delete</button>

  <script>
    const csrftoken = '{{ csrf_token }}';

    function updateProduct() {
      const id = document.getElementById('productId').value;
      const productName = document.getElementById('productName').value;
      const price = document.getElementById('price').value;

      fetch(`/Pros/${id}/`, {
        method: 'PUT', 
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': csrftoken
        },
        body: JSON.stringify({
          productName: productName,
          price: price
        })
      })
      .then(response => {
        if (!response.ok) {
          throw new Error('Update failed');
        }
        return response.json();
      })
      .then(data => {
        alert('Product updated successfully!');
        console.log(data);
      })
      .catch(error => {
        console.error('Error:', error);
      });
    }

    function deleteProduct() {
      const id = document.getElementById('productId').value;

      fetch(`/Pros/${id}/`, {
        method: 'DELETE',
        headers: {
          'X-CSRFToken': csrftoken
        }
      })
      .then(response => {
        if (response.status === 204) {
          alert('Product deleted successfully!');
        } else {
          alert('Delete failed');
        }
      })
      .catch(error => {
        console.error('Error:', error);
      });
    }
  </script>

</body>
</html>
