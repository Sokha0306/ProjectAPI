{% load static %}

<!doctype html>
<html lang="zxx">
<head>
    {% include 'TZ/head.html' %}
    {% include 'TZ/CSS.html' %}
    <style>
        .single_product_img img {
            max-width: 400px;
            height: auto;
            object-fit: contain;
            display: block;
            margin: 0 auto;
        }
        .product-details {
            text-align: center;
            margin-top: 30px;
        }
        .price {
            font-size: 24px;
            color: #df3232;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <header>
        {% include 'TZ/HeaderStart.html' %}
    </header>

    <main>
        <!-- Hero Section -->
        <div class="slider-area">
            <div class="single-slider slider-height2 d-flex align-items-center">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-12">
                            <div class="hero-cap text-center">
                                <h2>AMORE Product Details</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Product Detail Section -->
        <div class="product_image_area py-5">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-6">
                        <div class="single_product_img">
                            {% if type == 'new' %}
                                <img src="{{ prodetail.NewAImage.url }}" alt="{{ prodetail.NewAName }}">
                            {% elif type == 'popular' %}
                                <img src="{{ prodetail.PopIImage.url }}" alt="{{ prodetail.PopIName }}">
                            {% elif type == 'list' %}
                                <img src="{{ prodetail.ProLImage.url }}" alt="{{ prodetail.ProLName }}">
                            {% endif %}
                        </div>
                    </div>

                    <div class="col-lg-8 product-details">
                        {% if type == 'new' %}
                                <h2>{{ prodetail.NewAName }}</h2>
                                <p class="price">${{ prodetail.NewAPrice }}</p>
                                <div>{{ prodetail.NewADescription|safe }}</div>
                                <br>
                                <div>{{ prodetail.NewADetail|safe }}</div>  
                            {% elif type == 'popular' %}
                                <h2>{{ prodetail.PopIName }}</h2>
                                <p class="price">${{ prodetail.PopIPrice }}</p>
                                <div>{{ prodetail.PopIDescription|safe }}</div>
                                <br>
                                <div>{{ prodetail.PopIDetail|safe }}</div>
                            {% elif type == 'list' %}
                                <h2>{{ prodetail.ProLName }}</h2>
                                <p class="price">${{ prodetail.ProLPrice }}</p>
                                <div>{{ prodetail.ProLDescription|safe }}</div> 
                                <br>
                                <div>{{ prodetail.ProLDetail|safe }}</div>
                            {% endif %}
                        </div>



                        <!-- Quantity & Total Price -->
                        <div class="card_area mt-4">
                            <div class="product_count_area">
                                <p>Quantity</p>
                                <div class="product_count d-inline-block">
                                    <span class="product_count_item inumber-decrement"><i class="ti-minus"></i></span>
                                    <input
                                        type="number"
                                        class="product_count_item input-number"
                                        value="1"
                                        min="1"
                                        max="10"
                                        step="1"
                                        data-price="{% if type == 'new' %}{{ prodetail.NewAPrice|floatformat:2 }}
                                                    {% elif type == 'popular' %}{{ prodetail.PopIPrice|floatformat:2 }}
                                                    {% else %}{{ prodetail.ProLPrice|floatformat:2 }}{% endif %}">
                                    <span class="product_count_item number-increment"><i class="ti-plus"></i></span>
                                </div>
                                <p>Total Price:
                                    <span class="price_display" data-price="{% if type == 'new' %}{{ prodetail.NewAPrice|floatformat:2 }}
                                        {% elif type == 'popular' %}{{ prodetail.PopIPrice|floatformat:2 }}
                                        {% else %}{{ prodetail.ProLPrice|floatformat:2 }}{% endif %}">
                                        $0.00
                                    </span>
                                </p>
                            </div>
                            <br>
                            <div class="add_to_cart mt-3">
                                <a href="{% url 'CartTZ' %}" class="btn_3">Add to Cart</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        {% include 'TZ/FooterStart.html' %}
    </footer>

    {% include 'TZ/SearchModelBegin.html' %}
    {% include 'TZ/JShere.html' %}

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.card_area').forEach(card => {
            const decrement = card.querySelector('.inumber-decrement');
            const increment = card.querySelector('.number-increment');
            const input = card.querySelector('.input-number');
            const priceDisplay = card.querySelector('.price_display');
            const unitPrice = parseFloat(input.dataset.price);

            function updateTotal() {
                let qty = parseInt(input.value);
                if (isNaN(qty) || qty < 1) qty = 1;
                if (qty > 10) qty = 10;
                input.value = qty;
                priceDisplay.textContent = `$${(unitPrice * qty).toFixed(2)}`;
            }

            decrement.addEventListener('click', () => {
                let qty = parseInt(input.value);
                if (qty > 1) {
                    input.value = qty - 1;
                    updateTotal();
                }
            });

            increment.addEventListener('click', () => {
                let qty = parseInt(input.value);
                if (qty < 10) {
                    input.value = qty + 1;
                    updateTotal();
                }
            });

            input.addEventListener('input', updateTotal);
            updateTotal(); // Initialize on load
        });
    });
    </script>
</body>
</html>
